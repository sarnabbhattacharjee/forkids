<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spelling Trap: Final Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@700&display=swap');

        body {
            margin: 0;
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #2b32b2 0%, #1488cc 100%);
            color: white;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* --- OVERLAYS --- */
        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 500;
            display: flex; flex-direction: column; 
            align-items: center; justify-content: center;
            transition: opacity 0.5s;
        }
        
        .hidden { display: none !important; opacity: 0; pointer-events: none; }

        /* --- RULES SCREEN --- */
        .rules-box {
            background: white; color: #333; padding: 40px 60px;
            border-radius: 30px; text-align: center; border: 8px solid #c0392b;
            max-width: 80%; animation: popIn 0.5s;
        }
        .rules-title {
            font-family: 'Fredoka One'; font-size: clamp(2.5rem, 5vw, 4rem); 
            color: #c0392b; margin-bottom: 30px; text-transform: uppercase;
        }
        .rule-item {
            font-size: clamp(1.5rem, 3vw, 2.5rem); margin: 20px 0;
            font-weight: bold; border-bottom: 2px solid #eee; padding-bottom: 10px;
        }
        .btn-agree {
            background: #2ecc71; color: white; padding: 20px 50px;
            font-size: 2em; border: none; border-radius: 50px;
            font-family: 'Fredoka One'; cursor: pointer; margin-top: 30px;
            box-shadow: 0 10px 0 #27ae60; transition: transform 0.2s;
        }
        .btn-agree:hover { transform: translateY(-5px); }

        /* --- WINNER SCREEN --- */
        #winner-title {
            font-family: 'Fredoka One'; font-size: clamp(4rem, 10vw, 8rem);
            margin-bottom: 20px; text-shadow: 0 10px 0 rgba(0,0,0,0.2);
            animation: pulse 1s infinite;
        }
        #winner-details { font-size: 2.5em; margin-bottom: 40px; font-weight: bold; }
        .btn-home { background: #3498db; }

        /* --- DIFFICULTY SCREEN --- */
        .title-large { 
            font-family: 'Fredoka One'; font-size: clamp(3rem, 6vw, 6rem); 
            margin-bottom: 30px; color: #f1c40f; text-shadow: 0 5px 0 #c29d0b; text-align: center;
        }
        .btn-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; width: 90%; }
        .level-btn {
            padding: 2vh 4vw; font-size: clamp(1.5rem, 2.5vw, 2.5rem); 
            border: none; border-radius: 20px; cursor: pointer; font-family: 'Fredoka One'; color: white;
            transition: transform 0.2s; min-width: 200px; text-align: center;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
        }
        .level-btn:hover { transform: translateY(-5px); filter: brightness(1.1); }
        .btn-easy { background: #2ecc71; }
        .btn-medium { background: #f39c12; }
        .btn-hard { background: #e74c3c; }

        /* --- SCOREBOARD --- */
        #scoreboard {
            display: flex; justify-content: space-between; align-items: center;
            padding: 1vh 2vw; background: rgba(0,0,0,0.2);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 10;
        }
        .team-box {
            text-align: center; background: white; color: #333;
            padding: 5px 20px; border-radius: 15px; min-width: 80px;
            box-shadow: 0 4px 0 #bdc3c7; border: 3px solid transparent;
        }
        .team-label { font-size: 0.9em; font-weight: bold; opacity: 0.7; }
        .team-score { font-family: 'Fredoka One'; font-size: 2.5em; line-height: 1; }
        #s-boys { color: #3498db; }
        #s-girls { color: #ff6b81; }
        #s-teacher { color: #8e44ad; border-color: #8e44ad; }

        /* --- GAME AREA --- */
        #game-area {
            flex: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; padding: 20px;
        }
        #clue-box {
            background: #f1c40f; color: #2c3e50;
            padding: 2vh 4vw; border-radius: 50px;
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            font-weight: bold; margin-bottom: 2vh;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border: 4px solid white; max-width: 90%;
        }
        #puzzle-text {
            font-family: 'Fredoka One'; font-size: clamp(3rem, 8vw, 6rem);
            letter-spacing: 15px; margin-bottom: 3vh;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }
        #options-container {
            display: flex; gap: 20px; width: 90%;
            justify-content: center; flex-wrap: wrap;
        }
        .option-btn {
            background: white; border: none; padding: 20px 30px;
            font-family: 'Fredoka One'; font-size: clamp(1.5rem, 4vw, 3em);
            color: #2c3e50; border-radius: 20px; cursor: pointer;
            transition: transform 0.1s; box-shadow: 0 8px 0 #bdc3c7;
            min-width: 40%; flex: 1; border: 4px solid white;
            touch-action: manipulation;
        }
        .option-btn:active { transform: translateY(8px); box-shadow: none; }
        .option-btn:disabled { opacity: 0.6; cursor: not-allowed; }

        /* --- TIMER --- */
        #timer-container { width: 100%; height: 20px; background: rgba(0,0,0,0.3); position: relative; }
        #timer-bar { height: 100%; width: 100%; background: #2ecc71; transition: width 1s linear; }
        #timer-text { position: absolute; top: 25px; left: 50%; transform: translateX(-50%); font-family: 'Fredoka One'; font-size: 2em; text-shadow: 2px 2px 0 rgba(0,0,0,0.3); }

        /* --- CONTROLS --- */
        #controls-bottom {
            position: absolute; bottom: 20px; width: 100%;
            display: flex; justify-content: center; gap: 20px;
        }
        .ctrl-btn {
            background: rgba(255,255,255,0.2); color: white;
            border: 2px solid rgba(255,255,255,0.5); padding: 10px 20px;
            border-radius: 30px; cursor: pointer; font-weight: bold;
        }
        
        /* END BUTTON STYLE */
        .btn-end { background: #c0392b; border-color: #e74c3c; box-shadow: 0 5px 0 #922b21; }
        .btn-end:active { transform: translateY(3px); box-shadow: none; }

        /* --- MODAL --- */
        .modal-box { background: white; padding: 40px; border-radius: 20px; text-align: center; color: #333; border: 8px solid #f1c40f; }
        .btn-award { padding: 15px 30px; font-size: 1.5em; border: none; border-radius: 10px; cursor: pointer; font-family: 'Fredoka One'; margin: 10px; color: white; }
        .b-btn { background: #3498db; }
        .g-btn { background: #ff6b81; }
        .t-btn { background: #8e44ad; }

        /* --- ANIMATIONS --- */
        .correct-anim { background: #2ecc71 !important; color: white !important; transform: scale(1.05); }
        .wrong-anim { background: #e74c3c !important; color: white !important; animation: shake 0.4s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

    </style>
</head>
<body>

    <div id="rules-screen" class="overlay">
        <div class="rules-box">
            <div class="rules-title">‚ö†Ô∏è CLASS RULES ‚ö†Ô∏è</div>
            <div class="rule-item">ü§´ NO SHOUTING ALOUD</div>
            <div class="rule-item">‚ùÑÔ∏è KEEP THE CLASS COOL</div>
            <div class="rule-item">ü§ê NO SIDE TALKING</div>
            <button class="btn-agree" onclick="acceptRules()">I PROMISE ‚úã</button>
        </div>
    </div>

    <div id="difficulty-screen" class="overlay hidden">
        <div class="title-large">SELECT LEVEL</div>
        <div class="btn-container">
            <button class="level-btn btn-easy" onclick="startGame('easy')">EASY (150+)</button>
            <button class="level-btn btn-medium" onclick="startGame('medium')">MEDIUM (150+)</button>
            <button class="level-btn btn-hard" onclick="startGame('hard')">HARD (150+)</button>
        </div>
        <button onclick="location.href='index.html'" style="margin-top:40px; background:transparent; border:2px solid white; color:white; padding:10px 30px; border-radius:30px; cursor:pointer;">EXIT TO HUB</button>
    </div>

    <div id="winner-screen" class="overlay hidden">
        <h1 id="winner-title">BOYS WIN! üèÜ</h1>
        <div id="winner-details">B: 10 | G: 5 | T: 2</div>
        <div class="btn-container">
            <button class="level-btn btn-agree" onclick="location.reload()">PLAY AGAIN üîÑ</button>
            <button class="level-btn btn-home" onclick="location.href='index.html'">EXIT üè†</button>
        </div>
    </div>

    <div id="scoreboard">
        <div class="team-box">
            <div class="team-label">BOYS</div>
            <div class="team-score" id="score-boys">0</div>
        </div>
        <div class="team-box" style="border-color: #8e44ad;">
            <div class="team-label" style="color:#8e44ad">TEACHER</div>
            <div class="team-score" id="score-teacher" style="color:#8e44ad">0</div>
        </div>
        <div style="display:flex; gap:10px;">
            <button class="ctrl-btn" onclick="showMenu()">‚ò∞ MENU</button>
        </div>
        <div class="team-box">
            <div class="team-label">GIRLS</div>
            <div class="team-score" id="score-girls">0</div>
        </div>
    </div>

    <div id="timer-container">
        <div id="timer-bar"></div>
        <div id="timer-text">10</div>
    </div>

    <div id="game-area">
        <div id="clue-box">Loading...</div>
        <div id="puzzle-text">_ _ _</div>
        
        <div id="options-container">
            <button class="option-btn" id="btn-1" onclick="checkAnswer(1)">Option 1</button>
            <button class="option-btn" id="btn-2" onclick="checkAnswer(2)">Option 2</button>
        </div>
    </div>

    <div id="controls-bottom">
        <button class="ctrl-btn btn-end" onclick="declareWinner()">üèÜ END GAME</button>
        <button class="ctrl-btn" onclick="nextRound()">SKIP ‚è≠Ô∏è</button>
    </div>

    <div id="modal-overlay" class="overlay hidden">
        <div class="modal-box">
            <h1 style="margin:0; font-size:3em; color:#2ecc71;">CORRECT!</h1>
            <p style="font-size:1.5em;">Who gets the point?</p>
            <div style="display:flex; flex-wrap:wrap; justify-content:center;">
                <button class="btn-award b-btn" onclick="addPoint('boys')">BOYS</button>
                <button class="btn-award t-btn" onclick="addPoint('teacher')">TEACHER</button>
                <button class="btn-award g-btn" onclick="addPoint('girls')">GIRLS</button>
            </div>
        </div>
    </div>

    <script>
        const db = {
            easy: [
                ["A place to live", "HOUSE", "HORSE"], ["You wear this", "SHIRT", "SKIRT"], ["A round toy", "BALL", "BELL"], ["Sails on water", "SHIP", "SHOP"], ["Opposite of cold", "HOT", "HAT"],
                ["Wash hands with", "SOAP", "SOUP"], ["Farm animal", "COW", "NOW"], ["Cook in it", "PAN", "PEN"], ["A color", "BLUE", "GLUE"], ["Flies in sky", "PLANE", "PLAN"],
                ["Not noisy", "QUIET", "QUITE"], ["Sweet treat", "DESSERT", "DESERT"], ["Buy things here", "STORE", "STORY"], ["To listen", "HEAR", "HERE"], ["A shape", "ANGLE", "ANGEL"],
                ["Milk/Cheese", "DAIRY", "DIARY"], ["Walk on it", "FLOOR", "FLOUR"], ["Very big", "HUGE", "HUG"], ["Not weak", "STRONG", "STRING"], ["Green plant", "GRASS", "GLASS"],
                ["Give suggestion", "ADVISE", "ADVICE"], ["Climate", "WEATHER", "WHETHER"], ["Not tight", "LOOSE", "LOSE"], ["Did buy", "BOUGHT", "BROUGHT"], ["Fruit", "PEAR", "PAIR"],
                ["Tree part", "ROOT", "ROUTE"], ["Move fast", "RUN", "RAN"], ["Money", "CENT", "SCENT"], ["Many people", "CROWD", "CLOUD"], ["Look at", "STARE", "STAIR"],
                ["Number 8", "EIGHT", "NIGHT"], ["Direction", "LEFT", "LIFT"], ["Write on", "PAPER", "PEPPER"], ["Month", "JUNE", "TUNE"], ["Not strong", "WEAK", "WEEK"],
                ["King's home", "CASTLE", "CATTLE"], ["Assist", "HELP", "HELD"], ["#1 position", "FIRST", "FIST"], ["Floor rug", "MAT", "MAP"], ["Face part", "MOUTH", "MONTH"],
                ["Animal dr.", "VET", "WET"], ["Sleep on", "BED", "BAD"], ["Small rock", "STONE", "STOVE"], ["Be happy", "SMILE", "SMELL"], ["Red fruit", "APPLE", "APPLY"],
                ["Timepiece", "CLOCK", "CLICK"], ["Baby cat", "KITTEN", "KITCHEN"], ["Head wear", "HAT", "HUT"], ["Door key", "LOCK", "LUCK"], ["Not wet", "DRY", "TRY"],
                ["Ice cream", "CONE", "BONE"], ["Bee home", "HIVE", "FIVE"], ["Number 10", "TEN", "TAN"], ["Write with", "PENCIL", "STENCIL"], ["Drink", "WATER", "WAITER"],
                ["Night bird", "OWL", "BOWL"], ["School bag", "PACK", "BACK"], ["Body part", "NOSE", "ROSE"], ["Green amphibian", "FROG", "FOG"], ["Bread toast", "TOAST", "ROAST"],
                ["Hot season", "SUMMER", "DRUMMER"], ["Cold season", "WINTER", "WINNER"], ["Rain gear", "BOOTS", "BOATS"], ["Flying toy", "KITE", "BITE"], ["Sleep vision", "DREAM", "CREAM"],
                ["Meal time", "LUNCH", "LAUNCH"], ["Counting", "MATH", "MOTH"], ["Reading", "BOOK", "LOOK"], ["Music", "SONG", "LONG"], ["Happy face", "GLAD", "CLAD"],
                ["Dad", "FATHER", "FEATHER"], ["Mom", "MOTHER", "OTHER"], ["Sibling", "SISTER", "BLISTER"], ["Boy sibling", "BROTHER", "BOTHER"], ["Grandma", "GRANNY", "NANNY"],
                ["Pet", "DOG", "DIG"], ["Meow", "CAT", "CUT"], ["Cluck", "HEN", "PEN"], ["Oink", "PIG", "BIG"], ["Neigh", "HORSE", "HOUSE"],
                ["Quack", "DUCK", "LUCK"], ["Moo", "COW", "HOW"], ["Wool", "SHEEP", "EEP"], ["Milk source", "GOAT", "BOAT"], ["Long ears", "RABBIT", "HABIT"],
                ["Slow", "TURTLE", "PURPLE"], ["Swim", "FISH", "DISH"], ["Roar", "LION", "LINE"], ["Stripes", "TIGER", "FIGHTER"], ["Trunk", "ELEPHANT", "ELEGANT"],
                ["Tall", "GIRAFFE", "CARAFE"], ["Black/White", "ZEBRA", "COBRA"], ["Swing", "MONKEY", "DONKEY"], ["Big mouth", "HIPPO", "ZIPPO"], ["Horn", "RHINO", "DINO"],
                ["Slither", "SNAKE", "SNACK"], ["Crawl", "SPIDER", "SLIDER"], ["Honey", "BEE", "SEE"], ["Fly", "BIRD", "WORD"], ["Night", "BAT", "BET"],
                ["Yellow fruit", "BANANA", "BANDANA"], ["Red fruit", "CHERRY", "SHERRY"], ["Orange", "ORANGE", "RANGE"], ["Green fruit", "GRAPE", "DRAPE"], ["Sour", "LEMON", "DEMON"],
                ["Sweet", "CANDY", "HANDY"], ["Baked", "CAKE", "LAKE"], ["Cold treat", "ICE", "MICE"], ["Breakfast", "EGG", "LEG"], ["Drink white", "MILK", "SILK"],
                ["Sandwich", "BREAD", "DREAD"], ["Meat", "CHICKEN", "KITCHEN"], ["Italian", "PIZZA", "PIAZZA"], ["Long food", "PASTA", "PASTE"], ["Liquid", "JUICE", "ICE"],
                ["Hot drink", "TEA", "SEA"], ["Bean drink", "COFFEE", "TOFFEE"], ["White grain", "RICE", "MICE"], ["Veggie", "CORN", "HORN"], ["Red veg", "TOMATO", "POTATO"],
                ["Classroom", "DESK", "DISK"], ["Write board", "CHALK", "WALK"], ["Cut paper", "SCISSORS", "VISORS"], ["Stick", "GLUE", "BLUE"], ["Carry", "BAG", "RAG"],
                ["Read", "STORY", "STORE"], ["Draw", "ART", "CART"], ["Sing", "MUSIC", "MAGIC"], ["Play", "GAME", "FAME"], ["Win", "PRIZE", "PRICE"],
                ["Shape", "CIRCLE", "CIRCUS"], ["Four sides", "SQUARE", "STARE"], ["Three sides", "TRIANGLE", "TANGLE"], ["Five points", "STAR", "STIR"], ["Love", "HEART", "HURT"],
                ["Color", "PINK", "SINK"], ["Dark", "BLACK", "BLOCK"], ["Light", "WHITE", "KITE"], ["Grass", "GREEN", "QUEEN"], ["Sky", "BLUE", "GLUE"],
                ["Fire", "RED", "BED"], ["Sun", "YELLOW", "FELLOW"], ["Grape", "PURPLE", "PEOPLE"], ["Dirt", "BROWN", "CROWN"], ["Metal", "GOLD", "COLD"],
                ["Money", "COIN", "JOIN"], ["Paper money", "BILL", "PILL"], ["Rich", "WEALTH", "HEALTH"], ["Cost", "PRICE", "PRIZE"], ["Store", "SHOP", "SHIP"]
            ],
            medium: [
                ["Correct", "RIGHT", "WRITE"], ["Not heavy", "LIGHT", "LITE"], ["Construct", "BUILD", "BILLED"], ["A comrade", "FRIEND", "FREIND"], ["Get", "RECEIVE", "RECIEVE"],
                ["Sure", "DEFINITE", "DEFIANT"], ["Start", "BEGINNING", "BEGINING"], ["Tomorrow", "TOMORROW", "TOMMOROW"], ["Calm", "PEACE", "PIECE"], ["Simple", "EASY", "EZ"],
                ["Under", "BELOW", "BELLOW"], ["Above", "ABOVE", "ABOUT"], ["Travel", "JOURNEY", "JURNEY"], ["Location", "PLACE", "PLAICE"], ["Nation", "COUNTRY", "COUNTY"],
                ["Group", "PEOPLE", "PEEPLE"], ["Knowledge", "LEARN", "LERN"], ["Teach", "TEACHER", "TEATCHER"], ["Class", "STUDENT", "STUDANT"], ["Building", "SCHOOL", "SKOOL"],
                ["Season", "AUTUMN", "AUTUM"], ["Cold time", "WINTER", "WINNER"], ["Hot time", "SUMMER", "SOMMER"], ["Bloom time", "SPRING", "SPRUNG"], ["Rainy", "STORM", "STREAM"],
                ["Fast", "QUICK", "KWICK"], ["Quiet", "SILENT", "SILANT"], ["Loud", "NOISY", "NOSEY"], ["Startled", "SURPRISE", "SUPRISE"], ["Faith", "BELIEVE", "BELEIVE"],
                ["Goal", "SUCCESS", "SUCESS"], ["Different", "SPECIAL", "SPEICAL"], ["Need", "NECESSARY", "NECESARY"], ["Divide", "SEPARATE", "SEPERATE"], ["Funny", "HUMOR", "HUMER"],
                ["Use", "USEFUL", "USEFULL"], ["Until", "UNTIL", "TILL"], ["Truly", "TRULY", "TRUELLY"], ["Complete", "WHOLE", "HOLE"], ["Part", "PIECE", "PEACE"],
                ["Look", "APPEAR", "APEAR"], ["Go away", "DISAPPEAR", "DISSAPEAR"], ["Feeling", "EMOTION", "EMOSION"], ["Scared", "AFRAID", "AFRADE"], ["Mad", "ANGRY", "ANGLY"],
                ["Smart", "INTELLIGENT", "INTELIGENT"], ["Pretty", "BEAUTIFUL", "BEUTIFUL"], ["Job", "CAREER", "CARER"], ["Doctor", "MEDICINE", "MEDICIN"], ["Help", "ASSIST", "ASIST"],
                ["Protect", "GUARD", "GARD"], ["Leader", "CHIEF", "CHEIF"], ["King", "REIGN", "RAIN"], ["Outside", "FOREIGN", "FORIEN"], ["Heavy", "WEIGHT", "WAIT"],
                ["Height", "HEIGHT", "HIGHT"], ["Number 40", "FORTY", "FOURTY"], ["Number 90", "NINETY", "NINTY"], ["Across", "THROUGH", "THRU"], ["Careful", "THOROUGH", "THROUGH"],
                ["Understand", "REALIZE", "RELIZE"], ["Known", "FAMILIAR", "FAMILAR"], ["Similar", "ALIKE", "ALICK"], ["Different", "VARIOUS", "VERIOUS"], ["Choose", "DECIDE", "DICIDE"],
                ["Maybe", "PROBABLY", "PROBBLY"], ["Result", "EFFECT", "AFFECT"], ["Action", "AFFECT", "EFFECT"], ["Stop", "CEASE", "SEIZE"], ["Grab", "SEIZE", "CEASE"],
                ["Letter", "STATIONERY", "STATIONARY"], ["Still", "STATIONARY", "STATIONERY"], ["City", "CAPITAL", "CAPITOL"], ["Building", "CAPITOL", "CAPITAL"], ["Rule", "PRINCIPLE", "PRINCIPAL"],
                ["Headmaster", "PRINCIPAL", "PRINCIPLE"], ["Past", "PASSED", "PAST"], ["Time", "PAST", "PASSED"], ["Allow", "ACCEPT", "EXCEPT"], ["But", "EXCEPT", "ACCEPT"],
                ["Desert", "DESERT", "DESSERT"], ["Sweet", "DESSERT", "DESERT"], ["Place", "THERE", "THEIR"], ["Owners", "THEIR", "THERE"], ["They are", "THEY'RE", "THERE"],
                ["Possess", "WHOSE", "WHO'S"], ["Who is", "WHO'S", "WHOSE"], ["Your are", "YOU'RE", "YOUR"], ["Possess", "YOUR", "YOU'RE"], ["It is", "IT'S", "ITS"],
                ["Possess", "ITS", "IT'S"], ["Relax", "LOOSE", "LOSE"], ["Lost", "LOSE", "LOOSE"], ["Weather", "WEATHER", "WHETHER"], ["If", "WHETHER", "WEATHER"],
                ["See", "SIGHT", "SITE"], ["Place", "SITE", "CITE"], ["Quote", "CITE", "SITE"], ["Path", "COURSE", "COARSE"], ["Rough", "COARSE", "COURSE"],
                ["Group", "COUNCIL", "COUNSEL"], ["Advise", "COUNSEL", "COUNCIL"], ["Compliment", "COMPLEMENT", "COMPLIMENT"], ["Praise", "COMPLIMENT", "COMPLEMENT"], ["Morning", "MORNING", "MOURNING"],
                ["Grief", "MOURNING", "MORNING"], ["Naked", "BARE", "BEAR"], ["Animal", "BEAR", "BARE"], ["Check", "BREAK", "BRAKE"], ["Stop car", "BRAKE", "BREAK"],
                ["Flower", "FLOWER", "FLOUR"], ["Baking", "FLOUR", "FLOWER"], ["Male", "MALE", "MAIL"], ["Post", "MAIL", "MALE"], ["Pain", "PAIN", "PANE"],
                ["Window", "PANE", "PAIN"], ["Story", "TALE", "TAIL"], ["Animal part", "TAIL", "TALE"], ["Wait", "WAIT", "WEIGHT"], ["Heavy", "WEIGHT", "WAIT"],
                ["Road", "WAY", "WEIGH"], ["Scale", "WEIGH", "WAY"], ["Fee", "FARE", "FAIR"], ["Equal", "FAIR", "FARE"], ["Stair", "STAIR", "STARE"],
                ["Look", "STARE", "STAIR"], ["Metal", "STEEL", "STEAL"], ["Rob", "STEAL", "STEEL"], ["Number 2", "TWO", "TOO"], ["Also", "TOO", "TWO"],
                ["To go", "TO", "TOO"], ["Sea movement", "WAVE", "WAIVE"], ["Give up", "WAIVE", "WAVE"], ["Feeble", "WEAK", "WEEK"], ["7 Days", "WEEK", "WEAK"]
            ],
            hard: [
                ["Govt system", "BUREAUCRACY", "BEUROCRACY"], ["Helpful", "ACCOMMODATE", "ACCOMODATE"], ["Shame", "EMBARRASS", "EMBARASS"], ["Rhythm", "RHYTHM", "RYTHM"], ["Duty", "CONSCIENCE", "CONCIENCE"],
                ["Aware", "CONSCIOUS", "CONCIOUS"], ["Rank", "COLONEL", "KERNEL"], ["Separate", "SEPARATE", "SEPERATE"], ["Event", "OCCURRENCE", "OCCURENCE"], ["Give up", "YIELD", "YEILD"],
                ["Weird", "WEIRD", "WIERD"], ["Permission", "LICENSE", "LISENCE"], ["Keep", "MAINTENANCE", "MAINTAINANCE"], ["Benefit", "PRIVILEGE", "PRIVILEDGE"], ["Schedule", "CALENDAR", "CALENDER"],
                ["Promise", "GUARANTEE", "GARANTEE"], ["Fun", "PASTIME", "PASSTIME"], ["Go past", "EXCEED", "EXEED"], ["Stubborn", "PERSEVERE", "PERSERVERE"], ["Argument", "ARGUMENT", "ARGUEMENT"],
                ["Getting", "RECEIVING", "RECIEVING"], ["Job", "ENTREPRENEUR", "ENTREPRENUER"], ["Question", "QUESTIONNAIRE", "QUESTIONAIRE"], ["Change", "MANEUVER", "MANUEVER"], ["Agreement", "CONSENSUS", "CONCENSUS"],
                ["Spy", "ESPIONAGE", "ESPIANAGE"], ["Middle", "MEDIEVAL", "MEDIVAL"], ["Ghost", "APPARITION", "APARITION"], ["Example", "PARADIGM", "PARADIM"], ["Jewelry", "JEWELRY", "JEWLRY"],
                ["Old", "ANCIENT", "ANCIANT"], ["Respect", "ALLEGIANCE", "ALEGIANCE"], ["Space", "VACUUM", "VACCUM"], ["Copy", "MIMIC", "MIMMICK"], ["King", "SOVEREIGN", "SOVERIGN"],
                ["Drink", "LIQUEUR", "LIQUOR"], ["Book list", "BIBLIOGRAPHY", "BIBLIOGRAFY"], ["Doctor", "PHYSICIAN", "PHISICIAN"], ["Lungs", "PNEUMONIA", "NUMONIA"], ["Mind", "PSYCHOLOGY", "SYCHOLOGY"],
                ["Water", "AQUATIC", "AQUATICK"], ["Food", "ZUCCHINI", "ZUCHINI"], ["Plant", "BROCCOLI", "BROCOLI"], ["Spice", "CINNAMON", "CINAMON"], ["Drink", "CAPPUCCINO", "CAPUCINO"],
                ["Boat", "YACHT", "YATCH"], ["Music", "RHYTHM", "RYTHEM"], ["Rhyme", "RHYME", "RIME"], ["Drum", "CYMBAL", "SYMBOL"], ["Sign", "SYMBOL", "CYMBAL"],
                ["Story", "MYTH", "MITH"], ["Fake", "PSEUDONYM", "SUDONYM"], ["Touch", "TACTILE", "TACTILL"], ["See", "VISUAL", "VIZUAL"], ["Hear", "AUDITORY", "AUDITERY"],
                ["Smell", "OLFACTORY", "OLFACTERY"], ["Taste", "GUSTATORY", "GUSTATERY"], ["Logic", "FALLACY", "PHALLACY"], ["Wrong", "ERRONEOUS", "ERRONIOUS"], ["Correct", "ACCURATE", "ACURATE"],
                ["Exact", "PRECISE", "PRECIZE"], ["Short", "CONCISE", "CONSIZE"], ["Wordy", "VERBOSE", "VERBOSE"], ["Quiet", "TACITURN", "TACITERN"], ["Talkative", "LOQUACIOUS", "LOQUATIOUS"],
                ["Sleepy", "LETHARGIC", "LETHARJIC"], ["Energetic", "VIGOROUS", "VIGERIOUS"], ["Weak", "FRAIL", "FRALE"], ["Strong", "ROBUST", "ROBUSTE"], ["Happy", "ECSTATIC", "ECSTATICK"],
                ["Sad", "MELANCHOLY", "MELANCOLLEY"], ["Fear", "PHOBIA", "FOBIA"], ["Love", "PHILIA", "FILIA"], ["Hate", "MISANTHROPE", "MISSANTHROPE"], ["Good", "BENEVOLENT", "BENIVOLENT"],
                ["Bad", "MALEVOLENT", "MALIVOLENT"], ["Truth", "VERACITY", "VARACITY"], ["Lie", "MENDACITY", "MENDASITY"], ["Bold", "AUDACIOUS", "AUDATIOUS"], ["Shy", "TIMID", "TIMMED"],
                ["Wise", "SAGACIOUS", "SAGATIOUS"], ["Dumb", "OBTUSE", "OBTOOSE"], ["Clear", "LUCID", "LUSID"], ["Cloudy", "OPAQUE", "OPAKE"], ["Short", "BRIEF", "BREIF"],
                ["Lengthy", "PROLONGED", "PROLONGUED"], ["Stop", "HALT", "HAULT"], ["Go", "PROCEED", "PROCEDE"], ["Win", "TRIUMPH", "TRIUMF"], ["Fail", "DEFEAT", "DEFEET"],
                ["Rich", "AFFLUENT", "AFLUENT"], ["Poor", "DESTITUTE", "DESTATUTE"], ["Help", "AID", "ADE"], ["Hurt", "HARM", "HARM"], ["Build", "CONSTRUCT", "KONSTRUCT"],
                ["Break", "DEMOLISH", "DEMOLISHE"], ["Start", "INITIATE", "INITATE"], ["End", "TERMINATE", "TERMINATE"], ["Give", "DONATE", "DONATE"], ["Take", "CONFISCATE", "CONFISKATE"],
                ["Buy", "PURCHASE", "PERCHASE"], ["Sell", "VEND", "VEND"], ["Borrow", "BORROW", "BARROW"], ["Lend", "LEND", "LEND"], ["Teach", "EDUCATE", "EDDUCATE"],
                ["Learn", "ACQUIRE", "AQUIRE"], ["Know", "COGNIZANT", "COGNIZENT"], ["Forget", "OBLIVIOUS", "OBLIVIUS"], ["See", "PERCEIVE", "PERCIEVE"], ["Ignore", "DISREGARD", "DISREGUARD"],
                ["Love", "ADORE", "ADOUR"], ["Hate", "LOATHE", "LOATH"], ["Trust", "RELY", "RELY"], ["Doubt", "SKEPTICAL", "SCEPTICAL"], ["Believe", "CREDIBLE", "CREDABLE"],
                ["Fake", "SPURIOUS", "SPURIUS"], ["Real", "AUTHENTIC", "AUTHENTICK"], ["Copy", "IMITATION", "IMITACION"], ["Same", "IDENTICAL", "IDENTICLE"], ["Mix", "MISCELLANEOUS", "MISCELANEOUS"]
            ]
        };

        // --- GAME STATE ---
        let currentPool = [];
        let scores = { boys: 0, girls: 0, teacher: 0 };
        let timerInterval;
        let timeLeft = 10;
        let correctBtn = 0;

        // --- FUNCTIONS ---

        function acceptRules() {
            document.getElementById('rules-screen').classList.add('hidden');
            document.getElementById('difficulty-screen').classList.remove('hidden');
        }

        function startGame(level) {
            currentPool = [...db[level]];
            scores = { boys: 0, girls: 0, teacher: 0 };
            updateScores();
            document.getElementById('difficulty-screen').classList.add('hidden');
            nextRound();
        }

        function showMenu() {
            document.getElementById('difficulty-screen').classList.remove('hidden');
        }

        function generatePuzzleText(word) {
            if (word.length <= 2) return word[0] + " _";
            let res = word[0] + " ";
            for(let i=1; i<word.length-1; i++) res += "_ ";
            res += word[word.length-1];
            return res;
        }

        function declareWinner() {
            clearInterval(timerInterval);
            document.getElementById('winner-screen').classList.remove('hidden');
            
            const title = document.getElementById('winner-title');
            const details = document.getElementById('winner-details');
            
            let winner = "";
            let color = "";
            
            // Logic to determine winner
            if (scores.boys > scores.girls && scores.boys > scores.teacher) {
                winner = "BOYS WIN! üèÜ";
                color = "#3498db";
            } else if (scores.girls > scores.boys && scores.girls > scores.teacher) {
                winner = "GIRLS WIN! üèÜ";
                color = "#ff6b81";
            } else if (scores.teacher > scores.boys && scores.teacher > scores.girls) {
                winner = "TEACHER WINS! üéì";
                color = "#8e44ad";
            } else {
                winner = "IT'S A DRAW! ü§ù";
                color = "#f1c40f";
            }
            
            title.innerText = winner;
            title.style.color = color;
            details.innerText = `BOYS: ${scores.boys} | GIRLS: ${scores.girls} | TEACHER: ${scores.teacher}`;
        }

        function nextRound() {
            clearInterval(timerInterval);
            document.getElementById('modal-overlay').classList.add('hidden');
            
            if (currentPool.length === 0) { alert("Game Over! All words used."); return; }
            const randIdx = Math.floor(Math.random() * currentPool.length);
            const data = currentPool[randIdx];
            
            document.getElementById('clue-box').innerText = data[0];
            document.getElementById('puzzle-text').innerText = generatePuzzleText(data[1]);

            const btn1 = document.getElementById('btn-1');
            const btn2 = document.getElementById('btn-2');
            
            btn1.disabled = false; btn2.disabled = false;
            btn1.className = "option-btn"; btn2.className = "option-btn";
            btn1.style.background = "white"; btn2.style.background = "white";
            btn1.style.color = "#2c3e50"; btn2.style.color = "#2c3e50";

            if (Math.random() > 0.5) {
                btn1.innerText = data[1]; // Correct
                btn2.innerText = data[2]; // Wrong
                correctBtn = 1;
            } else {
                btn1.innerText = data[2]; // Wrong
                btn2.innerText = data[1]; // Correct
                correctBtn = 2;
            }

            startTimer();
        }

        function startTimer() {
            timeLeft = 10;
            updateTimerUI();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerUI();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeUp();
                }
            }, 1000);
        }

        function updateTimerUI() {
            document.getElementById('timer-text').innerText = timeLeft;
            const pct = (timeLeft / 10) * 100;
            const bar = document.getElementById('timer-bar');
            bar.style.width = pct + "%";
            
            if (timeLeft <= 3) { 
                bar.style.background = "#e74c3c"; 
            } else if (timeLeft <= 6) { 
                bar.style.background = "#f1c40f"; 
            } else {
                bar.style.background = "#2ecc71"; 
            }
        }

        function handleTimeUp() {
            document.getElementById('clue-box').innerText = "TIME'S UP! ‚è∞";
            disableButtons();
            
            setTimeout(() => {
                document.getElementById('modal-overlay').classList.remove('hidden');
            }, 1000);
        }

        function checkAnswer(btnIdx) {
            const btn = document.getElementById('btn-' + btnIdx);
            
            if (btnIdx === correctBtn) {
                // CORRECT
                clearInterval(timerInterval);
                btn.classList.add('correct-anim');
                btn.style.background = "#2ecc71";
                btn.style.color = "white";
                
                // Disable other
                const other = (btnIdx === 1) ? 2 : 1;
                document.getElementById('btn-' + other).disabled = true;

                setTimeout(() => {
                    document.getElementById('modal-overlay').classList.remove('hidden');
                }, 500);
            } else {
                // WRONG - TRY AGAIN LOGIC
                btn.classList.add('wrong-anim');
                btn.style.background = "#e74c3c";
                btn.style.color = "white";
                btn.disabled = true; // Disable just this one
                document.getElementById('clue-box').innerText = "TRY AGAIN! ‚ö†Ô∏è";
                // DO NOT SHOW MODAL YET. Let them click the other one.
            }
        }

        function disableButtons() {
            document.getElementById('btn-1').disabled = true;
            document.getElementById('btn-2').disabled = true;
        }

        function addPoint(team) {
            scores[team]++;
            updateScores();
            nextRound();
        }

        function updateScores() {
            document.getElementById('score-boys').innerText = scores.boys;
            document.getElementById('score-girls').innerText = scores.girls;
            document.getElementById('score-teacher').innerText = scores.teacher;
        }

    </script>
</body>
</html>
