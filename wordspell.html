<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Battle: League Tracker</title>
    <style>
        /* CSS STYLES */
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@700&display=swap');

        body {
            margin: 0;
            font-family: 'Nunito', sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        #game-stage { flex: 1; display: flex; position: relative; }
        .side { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: flex 0.3s ease; position: relative; }
        #left-side { background-color: #3498db; border-right: 2px solid rgba(0,0,0,0.1); }
        #right-side { background-color: #ff6b81; border-left: 2px solid rgba(0,0,0,0.1); }
        
        .score-display { font-family: 'Fredoka One', cursive; font-size: 12em; line-height: 1; text-shadow: 5px 5px 0 rgba(0,0,0,0.2); z-index: 10; }
        .team-name { font-family: 'Fredoka One', cursive; font-size: 3em; text-transform: uppercase; background: rgba(0,0,0,0.2); padding: 10px 40px; border-radius: 50px; }

        #control-panel {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 30px; width: 600px;
            text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.6); z-index: 100;
            color: #333; border: 8px solid #f1c40f;
        }

        #timer-container { width: 100%; height: 40px; background: #eee; border-radius: 20px; margin-bottom: 20px; overflow: hidden; position: relative; box-shadow: inset 0 2px 5px rgba(0,0,0,0.2); }
        #time-fill { height: 100%; width: 100%; background: #27ae60; border-radius: 20px; transition: width 0.1s linear, background-color 0.3s; }
        #timer-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: 'Fredoka One', cursive; color: white; font-size: 1.5em; text-shadow: 0 1px 3px rgba(0,0,0,0.5); z-index: 5; }

        #current-word { font-family: 'Fredoka One', cursive; font-size: 3.5em; color: #2c3e50; margin: 15px 0; min-height: 1.2em; word-wrap: break-word; }

        .action-btn { padding: 15px 25px; font-size: 1.4em; border: none; border-radius: 15px; cursor: pointer; font-family: 'Fredoka One', cursive; color: white; transition: transform 0.1s; margin: 5px; box-shadow: 0 5px 0 rgba(0,0,0,0.2); }
        .action-btn:active { transform: translateY(4px); box-shadow: none; }
        #btn-next { background-color: #f39c12; width: 100%; margin-bottom: 20px; font-size: 2em; }
        #btn-boy-win { background-color: #2980b9; width: 45%; }
        #btn-girl-win { background-color: #c0392b; width: 45%; }
        #btn-end { background-color: #333; margin-top: 15px; width: 100%; font-size: 1em; padding: 10px; }

        #settings-bar { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 20px; display: flex; gap: 10px; z-index: 200; }
        .diff-btn { background: transparent; border: 2px solid white; color: white; padding: 5px 15px; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .diff-btn.active { background: white; color: #333; }

        /* --- HISTORY PANEL STYLES --- */
        #history-btn {
            position: absolute; top: 20px; right: 20px;
            background: rgba(0,0,0,0.5); color: white;
            border: 2px solid white; padding: 10px 20px;
            border-radius: 20px; cursor: pointer; font-weight: bold;
            z-index: 300; transition: 0.3s;
        }
        #history-btn:hover { background: white; color: #333; }

        #history-overlay {
            position: absolute; top: 0; right: -400px; /* Hidden by default */
            width: 350px; height: 100%;
            background: #ecf0f1; color: #333;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
            z-index: 400; transition: right 0.3s ease;
            display: flex; flex-direction: column;
            padding: 20px; box-sizing: border-box;
        }
        
        #history-overlay.open { right: 0; }

        .history-item {
            background: white; padding: 15px; margin-bottom: 10px;
            border-radius: 10px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .hist-score { font-family: 'Fredoka One', cursive; font-size: 1.5em; }
        .hist-winner { font-weight: bold; font-size: 0.9em; text-transform: uppercase; }
        .b-win { color: #3498db; }
        .g-win { color: #ff6b81; }
        .draw { color: #f1c40f; }

        #clear-hist-btn {
            background: #c0392b; color: white; border: none;
            padding: 10px; border-radius: 10px; cursor: pointer;
            margin-top: auto; font-weight: bold;
        }

        /* --- WINNER OVERLAY --- */
        #winner-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 999; display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        #winner-title { font-family: 'Fredoka One', cursive; font-size: 6em; color: #f1c40f; margin-bottom: 20px; animation: bounce 1s infinite alternate; }
        #winner-score { font-size: 3em; color: white; margin-bottom: 40px; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-20px); } }
    </style>
</head>
<body>

    <button id="history-btn" onclick="toggleHistory()">üìú MATCH HISTORY</button>

    <div id="history-overlay">
        <h2 style="margin-top:0; border-bottom: 2px solid #ccc; padding-bottom: 10px;">MATCH LOG</h2>
        <div id="history-list" style="overflow-y: auto; flex: 1;">
            </div>
        <button id="clear-hist-btn" onclick="clearHistory()">üóëÔ∏è RESET ALL HISTORY</button>
        <button onclick="toggleHistory()" style="margin-top: 10px; background:#95a5a6; border:none; padding:10px; border-radius:10px; cursor:pointer; color:white;">CLOSE</button>
    </div>

    <div id="winner-overlay">
        <div id="winner-title">BOYS WIN!</div>
        <div id="winner-score">Score: 0 - 0</div>
        <button class="action-btn" style="background: #2ecc71; font-size: 2em;" onclick="restartGame()">PLAY AGAIN üîÑ</button>
        <button class="action-btn" style="background: #f39c12; font-size: 1.5em; margin-top: 20px;" onclick="toggleHistoryFromEnd()">üìú VIEW LOG</button>
    </div>

    <div id="game-stage">
        <div class="side" id="left-side">
            <div class="team-name">Boys</div>
            <div class="score-display" id="score-boys">0</div>
        </div>

        <div class="side" id="right-side">
            <div class="team-name">Girls</div>
            <div class="score-display" id="score-girls">0</div>
        </div>

        <div id="control-panel">
            <div id="timer-container">
                <div id="timer-text">15</div>
                <div id="time-fill"></div>
            </div>
            
            <div style="font-size: 1.2em; color: #95a5a6; font-weight: bold; letter-spacing: 2px;">THE WORD IS:</div>
            <div id="current-word">READY?</div>
            
            <button class="action-btn" id="btn-next" onclick="newRound()">NEW WORD üé≤</button>
            
            <div style="display: flex; justify-content: space-between;">
                <button class="action-btn" id="btn-boy-win" onclick="awardPoint('boys')">Boys Point +1</button>
                <button class="action-btn" id="btn-girl-win" onclick="awardPoint('girls')">Girls Point +1</button>
            </div>

            <button class="action-btn" id="btn-end" onclick="endGame()">üèÜ END GAME</button>
        </div>
    </div>

    <div id="settings-bar">
        <button class="diff-btn active" onclick="setDiff('easy', this)">EASY</button>
        <button class="diff-btn" onclick="setDiff('medium', this)">MEDIUM</button>
        <button class="diff-btn" onclick="setDiff('hard', this)">HARD</button>
    </div>

    <script>
        // --- 600+ WORD DATABASE ---
        const words = {
            easy: [
                "Cat", "Dog", "Sun", "Run", "Jump", "Blue", "Red", "Fish", "Ball", "Tree", "Book", "Milk", "Rain", "Snow", "Star", "Moon", "Bird", "Duck", "Frog", "Baby", "Car", "Bus", "Boat", "Desk", "Pen", "Food", "Song", "Door", "Love", "Hand", "Foot", "Head", "Nose", "Eye", "Ear", "Mouth", "Cow", "Goat", "Home", "Park", "School", "Apple", "Egg", "Rice", "Meat", "King", "Queen", "Gold", "Time", "Play", "Walk", "Sit", "Stand", "Eat", "Drink", "Sleep", "Wake", "Look", "Give", "Take", "Hat", "Shoe", "Shirt", "Pant", "Bag", "Cup", "Plate", "Spoon", "Fork", "Knife", "Bed", "Lamp", "Fan", "Wall", "Floor", "Roof", "Box", "Toy", "Doll", "Kite", "Game", "Boy", "Girl", "Man", "Woman", "Face", "Hair", "Tooth", "Lip", "Neck", "Arm", "Leg", "Knee", "Toe", "Ice", "Fire", "Wind", "Sky", "Sea", "River", "Hill", "Road", "Map", "Key", "Lock", "Clock", "Ring", "Shop", "City", "Village", "Farm", "Zoo", "Ant", "Bee", "Fly", "Rat", "Bat", "Fox", "Lion", "Bear", "Wolf", "Deer", "Crow", "Hen", "Owl", "Ship", "Train", "Bike", "Taxi", "Plane", "Art", "Color", "Line", "Shape", "Size", "Big", "Small", "Hot", "Cold", "Good", "Bad", "Happy", "Sad", "Yes", "No", "One", "Two", "Ten", "New", "Old", "Day", "Night", "Week", "Year", "Month", "Name", "Word", "Pen", "Ink", "Paper", "Flag", "Money", "Rich", "Poor", "Fast", "Slow", "Stop", "Go", "Up", "Down", "In", "Out", "On", "Off", "Left", "Right", "Near", "Far", "Here", "There", "Who", "What", "Why", "How"
            ],
            medium: [
                "Apple", "Bread", "Chair", "Table", "House", "Horse", "Tiger", "Snake", "Pizza", "Water", "Cloud", "Plant", "Clock", "Phone", "Smile", "Happy", "Angry", "Green", "White", "Black", "Purple", "School", "Teacher", "Doctor", "Friend", "Garden", "Rabbit", "Monkey", "Banana", "Cookie", "Grape", "Summer", "Winter", "Spring", "Bottle", "Market", "Street", "Bridge", "Window", "Mirror", "Kitchen", "Bedroom", "Pencil", "Paper", "Eraser", "Laptop", "Mobile", "Screen", "Camera", "Music", "Dance", "Singer", "Artist", "Driver", "Farmer", "Police", "Office", "Planet", "Rocket", "Robot", "Strong", "Clever", "Hungry", "Thirsty", "Famous", "Simple", "Mother", "Father", "Sister", "Brother", "Pilot", "Nurse", "Chef", "Baker", "Actor", "Judge", "Lawyer", "Guard", "Soldier", "Writer", "Player", "Leader", "Worker", "Helper", "Owner", "Buyer", "Seller", "Guest", "Host", "Child", "Adult", "Human", "Person", "Family", "Group", "Team", "Crowd", "Class", "Party", "Event", "Lesson", "Story", "Movie", "Video", "Photo", "Image", "Sound", "Voice", "Noise", "Quiet", "Loud", "Soft", "Hard", "Rough", "Smooth", "Clean", "Dirty", "Sweet", "Sour", "Salt", "Spice", "Taste", "Smell", "Touch", "Sight", "Feeling", "Dream", "Wish", "Hope", "Fear", "Anger", "Joy", "Peace", "Love", "Hate", "Like", "Need", "Want", "Have", "Make", "Do", "Say", "Tell", "Speak", "Talk", "Hear", "Listen", "Read", "Write", "Learn", "Teach", "Know", "Think", "Guess", "Idea", "Mind", "Brain", "Heart", "Soul", "Life", "Death", "Born", "Grow", "Live", "Die", "Start", "End", "Begin", "Finish", "Open", "Close", "Enter", "Exit", "Push", "Pull", "Lift", "Drop", "Throw", "Catch", "Hold", "Carry", "Bring", "Send", "Show", "Hide", "Find", "Lose", "Win", "Beat", "Save", "Spend", "Buy", "Sell", "Pay", "Cost", "Price", "Value", "Cheap", "Free", "Sale", "Cash", "Card", "Bank", "Store", "Mall", "Hotel", "Cafe", "Park", "Beach", "Camp", "Trip", "Tour", "Visit", "Travel", "Move", "Stay", "Wait", "Meet", "Join", "Help"
            ],
            hard: [
                "Elephant", "Beautiful", "Butterfly", "Computer", "Hospital", "Library", "Umbrella", "Dinosaur", "Astronaut", "Chocolate", "Adventure", "Dangerous", "Crocodile", "Geography", "History", "Science", "Mountain", "Rainbow", "Vacation", "Weekend", "Question", "Answer", "Alphabet", "Different", "Important", "Together", "Yesterday", "Tomorrow", "Weather", "Because", "Thought", "People", "Friendship", "Vegetable", "Delicious", "Celebration", "Education", "Population", "Environment", "Pollution", "Newspaper", "Knowledge", "Passenger", "Vegetarian", "Restaurant", "Television", "Excitement", "Impossible", "Government", "University", "Technology", "Information", "Conversation", "Transportation", "Decoration", "Imagination", "Competition", "Dictionary", "Understand", "Remember", "Architecture", "Atmosphere", "Background", "Basketball", "Breakfast", "Brilliant", "Building", "Business", "Calendar", "Candidate", "Capital", "Captain", "Century", "Challenge", "Champion", "Character", "Chemical", "Childhood", "Citizen", "Classroom", "Collection", "Community", "Company", "Complete", "Condition", "Confidence", "Confusion", "Connection", "Construction", "Continent", "Contribution", "Control", "Convenient", "Corner", "Correct", "Country", "Courage", "Creative", "Creature", "Criminal", "Culture", "Curious", "Customer", "Daughter", "Decision", "Decorate", "Definition", "Delicious", "Delivery", "Dentist", "Department", "Describe", "Description", "Design", "Destroy", "Development", "Difference", "Difficult", "Direction", "Director", "Discover", "Discussion", "Disease", "Distance", "District", "Document", "Downstairs", "Economics", "Election", "Electric", "Elevator", "Emergency", "Employee", "Energy", "Engineer", "Enjoyment", "Entertainment", "Envelope", "Equipment", "Especially", "Establish", "Evening", "Evidence", "Exactly", "Example", "Excellent", "Exercise", "Exhibition", "Existence", "Expectation", "Experience", "Experiment", "Explanation", "Explosion", "Expression", "Extremely", "Factory", "Failure", "Familiar", "Fantastic", "Fashion", "Favorite", "Feature", "Festival", "Fiction", "Finally", "Financial", "Finger", "Firefighter", "Fireworks", "Flight", "Floating", "Football", "Foreign", "Forest", "Forever", "Forgive", "Fortune", "Forward", "Freedom", "Freezer", "Frequent", "Friendship", "Frighten", "Furniture", "Future", "Gallery", "Garage", "Garbage", "General", "Generation", "Generous", "Gentleman", "Geography", "Gesture", "Gigantic", "Glasses", "Global", "Government", "Gradually", "Graduate", "Grammar", "Grandfather", "Grandmother", "Grocery", "Ground"
            ]
        };

        let currentDiff = 'easy';
        let scores = { boys: 0, girls: 0 };
        let timeLeft = 15;
        let timerInterval = null;
        let isTimerRunning = false;
        
        // --- HISTORY LOGIC ---
        // Load from LocalStorage on startup
        let matchHistory = JSON.parse(localStorage.getItem('wordBattleHistory')) || [];

        function renderHistory() {
            const list = document.getElementById('history-list');
            list.innerHTML = ""; // Clear current list

            if (matchHistory.length === 0) {
                list.innerHTML = "<p style='text-align:center; color:#7f8c8d;'>No matches played yet.</p>";
                return;
            }

            // Create list items (Reversed so newest is top)
            matchHistory.slice().reverse().forEach((match, index) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                
                let winText = "";
                let scoreClass = "";

                if (match.boys > match.girls) {
                    winText = "<span class='b-win'>BOYS WIN</span>";
                } else if (match.girls > match.boys) {
                    winText = "<span class='g-win'>GIRLS WIN</span>";
                } else {
                    winText = "<span class='draw'>DRAW</span>";
                }

                div.innerHTML = `
                    <div class='hist-winner'>#${matchHistory.length - index} ${winText}</div>
                    <div class='hist-score'>${match.boys} - ${match.girls}</div>
                `;
                list.appendChild(div);
            });
        }

        function toggleHistory() {
            const overlay = document.getElementById('history-overlay');
            overlay.classList.toggle('open');
            renderHistory();
        }

        function toggleHistoryFromEnd() {
            document.getElementById('winner-overlay').style.display = 'none';
            document.getElementById('history-overlay').classList.add('open');
            renderHistory();
        }

        function clearHistory() {
            if (confirm("Are you sure? This will delete all past match records.")) {
                matchHistory = [];
                localStorage.removeItem('wordBattleHistory');
                renderHistory();
            }
        }

        function saveMatch() {
            // Add current game to history
            matchHistory.push({
                boys: scores.boys,
                girls: scores.girls,
                date: new Date().toISOString()
            });
            // Save to browser memory
            localStorage.setItem('wordBattleHistory', JSON.stringify(matchHistory));
        }

        // --- GAME LOGIC ---

        function setDiff(level, btn) {
            currentDiff = level;
            document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function newRound() {
            stopTimer();
            timeLeft = 15; 
            updateTimerVisuals();
            const list = words[currentDiff];
            const randomWord = list[Math.floor(Math.random() * list.length)];
            const wordDisplay = document.getElementById('current-word');
            wordDisplay.innerText = randomWord;
            wordDisplay.style.color = "#2c3e50";
            startTimer();
        }

        function startTimer() {
            if (isTimerRunning) return;
            isTimerRunning = true;
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerVisuals();
                if (timeLeft <= 0) timeIsUp();
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            isTimerRunning = false;
        }

        function updateTimerVisuals() {
            const bar = document.getElementById('time-fill');
            const text = document.getElementById('timer-text');
            text.innerText = timeLeft;
            const percentage = (timeLeft / 15) * 100;
            bar.style.width = percentage + "%";
            if (timeLeft > 10) bar.style.backgroundColor = "#27ae60";
            else if (timeLeft > 5) bar.style.backgroundColor = "#f1c40f";
            else bar.style.backgroundColor = "#c0392b";
        }

        function timeIsUp() {
            stopTimer();
            const display = document.getElementById('current-word');
            display.innerText = "TIME'S UP!";
            display.style.color = "#c0392b";
        }

        function awardPoint(team) {
            stopTimer();
            const display = document.getElementById('current-word');
            if (team === 'boys') {
                scores.boys++;
                document.getElementById('score-boys').innerText = scores.boys;
                display.innerText = "POINT BOYS!";
                display.style.color = "#3498db";
            } else {
                scores.girls++;
                document.getElementById('score-girls').innerText = scores.girls;
                display.innerText = "POINT GIRLS!";
                display.style.color = "#ff6b81";
            }
        }

        function endGame() {
            stopTimer();
            saveMatch(); // <--- This saves the score!
            
            const overlay = document.getElementById('winner-overlay');
            const title = document.getElementById('winner-title');
            const scoreText = document.getElementById('winner-score');
            
            overlay.style.display = 'flex';
            scoreText.innerText = `Final Score: BOYS ${scores.boys} - ${scores.girls} GIRLS`;

            if (scores.boys > scores.girls) {
                title.innerText = "üèÜ BOYS WIN! üèÜ";
                title.style.color = "#3498db";
            } else if (scores.girls > scores.boys) {
                title.innerText = "üèÜ GIRLS WIN! üèÜ";
                title.style.color = "#ff6b81";
            } else {
                title.innerText = "ü§ù IT'S A DRAW! ü§ù";
                title.style.color = "#f1c40f";
            }
        }

        function restartGame() {
            document.getElementById('winner-overlay').style.display = 'none';
            scores = { boys: 0, girls: 0 };
            document.getElementById('score-boys').innerText = '0';
            document.getElementById('score-girls').innerText = '0';
            document.getElementById('current-word').innerText = "READY?";
            document.getElementById('current-word').style.color = "#2c3e50";
            stopTimer();
            timeLeft = 15;
            updateTimerVisuals();
        }

        // Init history on load
        renderHistory();
    </script>
</body>
</html>